<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CÃ¢y TÃ¬nh YÃªu ðŸ’–</title>

<style>
body{
    margin:0;
    height:100vh;
    overflow:hidden;
    background:linear-gradient(to top,#fbc2eb,#a6c1ee);
}

/* NÃºt tim */
#startHeart{
    position:absolute;
    top:45%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:60px;
    cursor:pointer;
    z-index:10; /* Ä‘áº£m báº£o khÃ´ng bá»‹ Ä‘Ã¨ */
    user-select:none;
    animation:pulse 1.5s infinite;
}

@keyframes pulse{
    0%{transform:translate(-50%,-50%) scale(1)}
    50%{transform:translate(-50%,-50%) scale(1.2)}
    100%{transform:translate(-50%,-50%) scale(1)}
}

.fall{
    animation:drop 1.5s forwards;
}

@keyframes drop{
    to{ top:75%; }
}

canvas{
    position:absolute;
    top:0;
    left:0;
    z-index:1;
}
</style>
</head>

<body>

<div id="startHeart">ðŸ’—</div>
<canvas id="canvas"></canvas>

<script>
const heartBtn = document.getElementById("startHeart");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

/* Báº¯t cáº£ click + cháº¡m */
heartBtn.addEventListener("click", startTree);
heartBtn.addEventListener("touchstart", startTree);

function startTree(){

    heartBtn.classList.add("fall");

    setTimeout(()=>{
        heartBtn.style.display="none";
        growTree();
    },1500);
}

function growTree(){

    let trunkHeight = 0;
    let maxHeight = 250;
    let centerX = canvas.width/2;
    let baseY = canvas.height*0.8;

    let grow = setInterval(()=>{

        ctx.clearRect(0,0,canvas.width,canvas.height);

        ctx.fillStyle="#4b1e0d";
        ctx.fillRect(centerX-15, baseY-trunkHeight, 30, trunkHeight);

        ctx.strokeStyle="#4b1e0d";
        ctx.lineWidth=6;
        ctx.beginPath();
        ctx.moveTo(centerX, baseY-trunkHeight+80);
        ctx.lineTo(centerX-80, baseY-trunkHeight+30);
        ctx.moveTo(centerX, baseY-trunkHeight+80);
        ctx.lineTo(centerX+80, baseY-trunkHeight+30);
        ctx.stroke();

        trunkHeight+=3;

        if(trunkHeight>=maxHeight){
            clearInterval(grow);
            drawLeaves(centerX, baseY-maxHeight);
        }

    },20);
}

function drawLeaves(cx, topY){

    for(let t=0;t<Math.PI*2;t+=0.05){

        let x = 16*Math.pow(Math.sin(t),3);
        let y = 13*Math.cos(t)
              - 5*Math.cos(2*t)
              - 2*Math.cos(3*t)
              - Math.cos(4*t);

        for(let i=0;i<3;i++){

            let leaf = document.createElement("div");
            leaf.innerHTML="ðŸ’–";
            leaf.style.position="absolute";
            leaf.style.fontSize=(18+Math.random()*12)+"px";
            leaf.style.left = cx + x*10 + (Math.random()*20-10) + "px";
            leaf.style.top  = topY - y*10 + (Math.random()*20-10) + "px";
            document.body.appendChild(leaf);
        }
    }
}
</script>

</body>
</html>
